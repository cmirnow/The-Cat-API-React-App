"use strict";(self.webpackChunkTheCatAPI_React_App=self.webpackChunkTheCatAPI_React_App||[]).push([[772],{772:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var a=r(791),n=r(763),o=r(965),i=r(184);const s="fetching",l="loaded",c="error",d=(0,n.debounce)(((e,t)=>{e(s),(0,o.T)(t).then((()=>e("fetched"))).catch((()=>e(c)))}),500),u=(0,a.memo)((()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(s);return(0,a.useEffect)((()=>{d(n,t)}),[]),(0,i.jsxs)("div",{className:"random",children:[(0,i.jsx)("div",{children:(0,i.jsx)("button",{className:"btn btn-info",onClick:()=>d(n,t),style:{marginTop:"1rem"},children:"Get Random Cat!"})}),(0,i.jsxs)("div",{children:[r===s&&(0,i.jsx)("div",{className:"spinner-border text-warning",style:{width:"5rem",height:"5rem",margin:"60px auto"},role:"status",children:(0,i.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),r===c&&(0,i.jsx)("p",{style:{color:"red",margin:"60px auto"},children:"Failed to load cat image. Try again!"}),r!==s&&r!==c&&e&&(0,i.jsx)("img",{onLoad:()=>n(l),onError:()=>n(c),style:{display:r===l?"inline":"none"},src:e,alt:"Random Cat"})]})]})}))},965:(e,t,r)=>{r.d(t,{T:()=>s,c:()=>l});const a={},n="https://api.thecatapi.com/v1",o="live_IuJyxbEXobhzEFpKv1qHbEx7KaXq8yQbUhtaXgbEiJMmOXq7EvZ4BhOLTNgjC5mX",i=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4;const a=new AbortController,n=setTimeout((()=>a.abort()),r),o=await fetch(e,{...t,signal:a.signal});return clearTimeout(n),o},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=`${n}/images/search?timestamp=${Date.now()}`;if(a[r])return e(a[r][0].url),!0;for(let n=0;n<t;n++)try{var s;const t=await i(r,{headers:{"Content-Type":"application/json","x-api-key":o}},1e4);if(!t.ok)throw new Error(`HTTP error ${t.status}`);const n=await t.json();if(null===(s=n[0])||void 0===s||!s.url)throw new Error("No image URL in response");return a[r]=n,e(n[0].url),!0}catch(l){if(n===t-1)throw console.error("Failed to fetch random cat after retries:",l.message),l;await new Promise((e=>setTimeout(e,1e3*(n+1))))}},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=`${n}/breeds`;if(a[r])return e(a[r].filter((e=>{var t;return null!=(null===(t=e.image)||void 0===t?void 0:t.url)}))),!0;for(let n=0;n<t;n++)try{const t=await i(r,{headers:{"Content-Type":"application/json","x-api-key":o}},1e4);if(!t.ok)throw new Error(`HTTP error ${t.status}`);const n=await t.json();return a[r]=n,e(n.filter((e=>{var t;return null!=(null===(t=e.image)||void 0===t?void 0:t.url)}))),!0}catch(s){if(n===t-1)throw console.error("Failed to fetch cat breeds after retries:",s.message),s;await new Promise((e=>setTimeout(e,1e3*(n+1))))}}}}]);
//# sourceMappingURL=772.794aaabd.chunk.js.map